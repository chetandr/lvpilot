<div class="panel panel-info">
<div class="panel-heading">
    <div class="row">
        <div class="col-md-4">
            Insights â€“ Top ML Factors
        </div>
        <div class="col-md-2">
            <div class="form-group">
                <label class="whitelabel">Plant :</label>
                {{$ctrl.plantLabel}}
            </div>
        </div>
        <div class="col-md-2">
            <div class="form-group">
                <label class="whitelabel">Mill : </label>
                {{$ctrl.millLabel}}
            </div>
        </div>
        <div class="col-md-2">
            <div class="form-group">
                <label class="whitelabel">Target Gauge : </label>
                {{$ctrl.gauge}}
            </div>
        </div>
        <div class="col-md-2">
            <button
                    ng-class="['btn-xs', {'btn-success': $ctrl.currentPage != 0}, {'btn-default': $ctrl.currentPage == 0}]"
                    ng-click="$ctrl.$onPrev()"
                    ng-disabled="$ctrl.currentPage == 0"><span class="glyphicon glyphicon-arrow-left"></span> Prev</button>
            <button
                    ng-class="['btn-xs', {'btn-success': $ctrl.pageSize * ($ctrl.currentPage + 1) < $ctrl.factors.length}, {'btn-default': $ctrl.pageSize * ($ctrl.currentPage + 1) >= $ctrl.factors.length}]"
                    ng-click="$ctrl.$onNext()"
                    ng-disabled="$ctrl.pageSize * ($ctrl.currentPage + 1) >= $ctrl.factors.length">Next  <span class="glyphicon glyphicon-arrow-right"></span></button>
        </div>
    </div>
</div>
    <div class="panel-body">
        <div class="row">
            <div class="col-md-2" ng-repeat="filter in $ctrl.insightFilters" ng-if="idx != 'Select Period'">
                {{filter.key}}:
                <select ng-model="$ctrl[filter.key]" class="small-font">
                    <option value="{{null}}">Select {{filter.key}}</option>
                    <option ng-repeat="item in filter.value" value="{{item}}">{{item}}</option>
                </select>
            </div>
            <div class="col-md-3">
                Select Period:
                <select  class="small-font" ng-model="$ctrl.dateFrom">
                    <option ng-repeat="period in $ctrl.filters.period" value="{{period.key}}">{{period.value}}</option>
                </select>
                To
                <select class="small-font" ng-model="$ctrl.dateTo">
                    <option ng-repeat="period in $ctrl.filters.period" value="{{period.key}}">{{period.value}}</option>
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <div class="panel panel-success">
                    <div class="panel-heading">Ranked Factors</div>
                    <div class="panel-body">
                        <ul class="list-group" style="height:300px; overflow-y: scroll">
                            <li ng-repeat="factor in $ctrl.factors"
                                class="list-group-item list-group-item-warning"
                                ng-click="$ctrl.$onFactorClick(factor.key)">
                                <strong>Rank {{factor.rank}}: </strong> {{factor.value}}
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <insight-detail factors="$ctrl.pageFactors"
                                factor = "$ctrl.factor"
                                caster="$ctrl.Caster"
                                oven="$ctrl.Oven"
                                workrolls="$ctrl.WorkRolls"
                                alloy="$ctrl.Alloy"
                                period="$ctrl.period"
                                date-from = "$ctrl.dateFrom"
                                date-to = "$ctrl.dateTo"
                ></insight-detail>
            </div>
        </div>

        <div class="row" style="margin-top:10px">
            <div class="col-md-offset-10 col-md-2">
                <button
                        ng-class="['btn-xs', {'btn-success': $ctrl.currentPage != 0}, {'btn-default': $ctrl.currentPage == 0}]"
                        ng-click="$ctrl.$onPrev()"
                        ng-disabled="$ctrl.currentPage == 0"><span class="glyphicon glyphicon-arrow-left"></span> Prev</button>
                <button
                        ng-class="['btn-xs', {'btn-success': $ctrl.pageSize * ($ctrl.currentPage + 1) < $ctrl.factors.length}, {'btn-default': $ctrl.pageSize * ($ctrl.currentPage + 1) >= $ctrl.factors.length}]"
                        ng-click="$ctrl.$onNext()"
                        ng-disabled="$ctrl.pageSize * ($ctrl.currentPage + 1) >= $ctrl.factors.length">Next  <span class="glyphicon glyphicon-arrow-right"></span></button>
            </div>
        </div>
    </div>
</div>